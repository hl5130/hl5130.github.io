<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title><![CDATA[Android NDK å¼€å‘å…¥é—¨ï¼ˆä¸€ï¼‰]]></title>
    <url>%2F2019%2F04%2F10%2FAndroid-NDK-%E5%BC%80%E5%8F%91%E5%85%A5%E9%97%A8%EF%BC%88%E4%B8%80%EF%BC%89%2F</url>
    <content type="text"><![CDATA[ç®€ä»‹NDKå¼€å‘é€‚ç”¨äºŽéŸ³é¢‘ã€è§†é¢‘ã€3Då›¾å½¢ã€ç›¸æœºé©±åŠ¨ç­‰å¼€å‘ã€‚ å¼€å‘å·¥å…·ç®€ä»‹ Android NDKï¼šæ˜¯AndroidStudioçš„åŽŸç”Ÿå¼€å‘å·¥å…·åŒ…ï¼Œå…è®¸ä½¿ç”¨Cå’ŒC++ä»£ç  CMakeï¼šä¸€æ¬¾å¤–éƒ¨æž„å»ºå·¥å…·ï¼Œå¯ä¸ŽGradleæ­é…ä½¿ç”¨æ¥æž„å»ºåŽŸç”Ÿåº“ã€‚å¦‚æžœåªä½¿ç”¨ndk-buildï¼Œå°±ä¸éœ€è¦æ­¤ç»„ä»¶ LLDBï¼šç”¨æ¥è°ƒè¯•åŽŸç”Ÿä»£ç å¼€å‘å·¥å…·ä¸‹è½½ æ‰“å¼€ SDK Manager ç‚¹å‡» SDK Tools æ ‡ç­¾ é€‰ä¸­ LLDBã€CMake å’Œ NDK ç‚¹å‡» Applyï¼Œç„¶åŽåœ¨å¼¹å‡ºå¼å¯¹è¯æ¡†ä¸­ç‚¹å‡» OK å®‰è£…å®Œæˆï¼Œç‚¹å‡» Finishï¼Œç„¶åŽç‚¹å‡» OK åˆ›å»ºæ”¯æŒ C/C++ çš„æ–°é¡¹ç›®å¼€å‘çŽ¯å¢ƒ Mac ç³»ç»Ÿ Android Studio 3.3.2 Gradle ç‰ˆæœ¬ï¼šgradle-4.10.1-all æ­å»ºæ­¥éª¤å› ä¸ºä½¿ç”¨çš„æ˜¯ Android Studio 3.3.2ï¼Œåœ¨åˆ›å»ºæ–°é¡¹ç›®çš„æ—¶å€™æ²¡æœ‰ Include C++ Support è¿™ä¸ªé€‰é¡¹äº†ï¼Œæ‰€ä»¥çŽ°åœ¨å…ˆåˆ›å»ºåŸºç¡€é¡¹ç›®ï¼Œå†å…³è”C/C++ åˆ›å»ºåŸºç¡€é¡¹ç›® åˆ›å»ºæ–°çš„åŽŸç”Ÿæºæ–‡ä»¶ï¼Œå¹¶æ·»åŠ åˆ°é¡¹ç›®ä¸­ åˆ›å»º CMake æž„å»ºè„šæœ¬ï¼Œå°†åŽŸç”Ÿæºä»£ç æž„å»ºåˆ°åº“ä¸­ Gradl ä¸ŽåŽŸç”Ÿåº“å…³è” åˆ›å»ºæ–°çš„åŽŸç”Ÿæºæ–‡ä»¶åœ¨åº”ç”¨æ¨¡å—çš„ä¸»æºä»£ç é›†ä¸­åˆ›å»ºä¸€ä¸ªåŒ…å«æ–°å»ºåŽŸç”Ÿæºæ–‡ä»¶çš„cpp/ç›®å½•ï¼Œæ­¥éª¤å¦‚ä¸‹ï¼š é€‰æ‹© Project è§†å›¾ å¯¼èˆªåˆ° è‡ªå·±æ¨¡å— &gt; src &gt; main ,åœ¨ main ç›®å½•ä¸­åˆ›å»ºä¸€ä¸ªæ–°çš„æ–‡ä»¶å¤¹cpp åœ¨cppç›®å½•ä¸­åˆ›å»ºC/C++æ–‡ä»¶ï¼›åˆ›å»ºæ­¤æ–‡ä»¶æ—¶å¯ä»¥é€‰æ‹©åˆ›å»ºæ ‡å¤´æ–‡ä»¶ åˆ›å»º CMake æž„å»ºè„šæœ¬CMake æž„å»ºè„šæœ¬æ˜¯ä¸€ä¸ªçº¯æ–‡æœ¬æ–‡ä»¶ï¼Œæ‚¨å¿…é¡»å°†å…¶å‘½åä¸º CMakeLists.txtã€‚è¿™é‡Œåªä»‹ç»äº†åŸºæœ¬å‘½ä»¤ é€‰æ‹© Project è§†å›¾ åœ¨è‡ªå·±æ¨¡å—çš„æ ¹ç›®å½•ä¸‹åˆ›å»ºæ–‡ä»¶ï¼Œå‘½åCMakeLists.txt é…ç½®è„šæœ¬ 1234567891011121314151617181920# è®¾ç½® CMake çš„æœ€ä½Žç‰ˆæœ¬cmake_minimum_required(VERSION 3.4.1)# Specifies a library name, specifies whether the library is STATIC or# SHARED, and provides relative paths to the source code. You can# define multiple libraries by adding multiple add.library() commands,# and CMake builds them for you. When you build your app, Gradle# automatically packages shared libraries with your APK.add_library( # Specifies the name of the library. è¿™ä¸ªåº“çš„åå­— main # Sets the library as a shared library. è¿™ä¸ªåº“çš„ç±»åž‹ SHARED # Provides a relative path to your source file(s). æºæ–‡ä»¶çš„è·¯å¾„ src/main/cpp/main.cpp)# Specifies a path to native header files. æ ‡å¤´æ–‡ä»¶çš„è·¯å¾„include_directories(src/main/cpp/include/) æœ€åŽç”Ÿæˆçš„åŽŸç”Ÿåº“ï¼Œæ˜¯æœ‰å‘½åè§„èŒƒçš„ 1libåº“åç§°.so Gradle ä¸ŽåŽŸç”Ÿåº“å…³è”è¦å°† Gradle å…³è”åˆ°æ‚¨çš„åŽŸç”Ÿåº“ï¼Œæ‚¨éœ€è¦æä¾›ä¸€ä¸ªæŒ‡å‘ CMake æˆ– ndk-build è„šæœ¬æ–‡ä»¶çš„è·¯å¾„ã€‚åœ¨æ‚¨æž„å»ºåº”ç”¨æ—¶ï¼ŒGradle ä¼šä»¥ä¾èµ–é¡¹çš„å½¢å¼è¿è¡Œ CMake æˆ– ndk-buildï¼Œå¹¶å°†å…±äº«çš„åº“æ‰“åŒ…åˆ°æ‚¨çš„ APK ä¸­ã€‚Gradle è¿˜ä½¿ç”¨æž„å»ºè„šæœ¬æ¥äº†è§£è¦å°†å“ªäº›æ–‡ä»¶æ·»åŠ åˆ°æ‚¨çš„ Android Studio é¡¹ç›®ä¸­ï¼Œä»¥ä¾¿æ‚¨å¯ä»¥ä»Ž Project çª—å£è®¿é—®è¿™äº›æ–‡ä»¶ã€‚å¦‚æžœæ‚¨çš„åŽŸç”Ÿæºæ–‡ä»¶æ²¡æœ‰æž„å»ºè„šæœ¬ï¼Œåˆ™éœ€è¦å…ˆåˆ›å»º CMake æž„å»ºè„šæœ¬ï¼Œç„¶åŽå†ç»§ç»­ã€‚ å°† Gradle å…³è”åˆ°åŽŸç”Ÿé¡¹ç›®åŽï¼ŒAndroid Studio ä¼šæ›´æ–° Project çª—æ ¼ä»¥åœ¨ cpp ç»„ä¸­æ˜¾ç¤ºæ‚¨çš„æºæ–‡ä»¶å’ŒåŽŸç”Ÿåº“ï¼Œåœ¨ External Build Files ç»„ä¸­æ˜¾ç¤ºæ‚¨çš„å¤–éƒ¨æž„å»ºè„šæœ¬ã€‚ æ³¨ï¼šæ›´æ”¹ Gradle é…ç½®æ—¶ï¼Œè¯·ç¡®ä¿é€šè¿‡ç‚¹å‡»å·¥å…·æ ä¸­çš„ Sync Project åº”ç”¨æ›´æ”¹ã€‚æ­¤å¤–ï¼Œå¦‚æžœåœ¨å°† CMake æˆ– ndk-build è„šæœ¬æ–‡ä»¶å…³è”åˆ° Gradle åŽå†å¯¹å…¶è¿›è¡Œæ›´æ”¹ï¼Œæ‚¨åº”å½“ä»Žèœå•æ ä¸­é€‰æ‹© Build &gt; Refresh Linked C++ Projectsï¼Œå°† Android Studio ä¸Žæ‚¨çš„æ›´æ”¹åŒæ­¥ã€‚ å…³è”æ­¥éª¤ï¼š ä»Ž IDE å·¦ä¾§æ‰“å¼€ Project çª—æ ¼å¹¶é€‰æ‹© Android è§†å›¾ å³é”®ç‚¹å‡»æ‚¨æƒ³è¦å…³è”åˆ°åŽŸç”Ÿåº“çš„æ¨¡å—ï¼ˆä¾‹å¦‚ app æ¨¡å—ï¼‰ï¼Œå¹¶ä»Žèœå•ä¸­é€‰æ‹© Link C++ Project with Gradle é€‰æ‹© CMakeï¼Œè¯·ä½¿ç”¨ Project Path æ—çš„å­—æ®µä¸ºæ‚¨çš„å¤–éƒ¨ CMake é¡¹ç›®æŒ‡å®š CMakeLists.txt è„šæœ¬æ–‡ä»¶ ç‚¹å‡»OKå°±å¯ä»¥äº† æ£€æµ‹æ˜¯å¦æˆåŠŸæ‰€æœ‰å·¥ä½œå®Œæˆä¹‹åŽï¼Œæ‰“åŒ…APKï¼Œå¯¹APKè¿›è¡Œåˆ†æžï¼Œå‘çŽ°åœ¨libç›®å½•ä¸‹æœ‰CPUæž¶æž„æ–‡ä»¶å¤¹ï¼Œæ¯ä¸€ä¸ªæ–‡ä»¶å¤¹ä¸­éƒ½æœ‰libmain.soæ–‡ä»¶ï¼Œå°±è¯´æ˜ŽæˆåŠŸäº†ã€‚æ­¥éª¤å¦‚ä¸‹ï¼š Build &gt; Build Bundle(s)/ APK(S) &gt; Buidl APK(S) ç­‰å¾…æ‰“åŒ…å®Œæˆï¼Œç‚¹å¼€Anaylze APK å‡ºçŽ°çš„çª—ä½“ä¸­ï¼Œæ‰“å¼€libç›®å½•ï¼Œæ‰“å¼€å…¶ä¸­ä¸€ä¸ªCPUæž¶æž„ç›®å½•(ä¾‹å¦‚x86)ï¼Œå°±ä¼šçœ‹è§libmain.so åˆ©ç”¨ JNI è°ƒç”¨åŽŸç”Ÿåº“JNIæ˜¯Java Native Interfaceçš„ç¼©å†™ï¼Œå®ƒæä¾›äº†è‹¥å¹²çš„APIå®žçŽ°äº†Javaå’Œå…¶ä»–è¯­è¨€çš„é€šä¿¡ï¼ˆä¸»è¦æ˜¯C&amp;C++ï¼‰ ä½¿ç”¨æ–¹æ³•ä»¥ä¸Šé¢çš„åŽŸç”Ÿåº“ä¸ºä¾‹å­ï¼Œä»‹ç» JNI æºæ–‡ä»¶ main.cpp12345678910#include &lt;jni.h&gt;#include &lt;string&gt;extern &quot;C&quot; JNIEXPORT jstringJNICALLJava_com_hongliang_ndkdemo_NDKMainHelper_getNDKPrint(JNIEnv *env, jobject /* this */) &#123; std::string hello = &quot;NDKDemo&quot;; return env-&gt;NewStringUTF(hello.c_str());&#125; #include &lt;jni.h&gt; å£°æ˜Žæ­¤æ–‡ä»¶è¦ä½¿ç”¨ jni çš„å†…å®¹ #include &lt;string&gt; å› ä¸ºéœ€è¦ä½¿ç”¨åˆ° Stringï¼Œæ‰€ä»¥è¦å£°æ˜Ž Java_com_hongliang_ndkdemo_NDKMainHelper_hello è¿™ä¸ªæ˜¯æœ€é‡è¦çš„ï¼Œå› ä¸ºæ˜¯æœ‰å‘½åè§„èŒƒçš„ï¼šJava_åŒ…å_ç±»å_æ–¹æ³•åã€‚å¯ä»¥ç†è§£ä¸ºè°ƒç”¨com.hongliang.ndkdemoåŒ…ä¸‹NDKMainHelperç±»çš„helloæ–¹æ³•ï¼Œå®žé™…æ˜¯è°ƒç”¨ main.cpp çš„ Java_com_hongliang_ndkdemo_NDKMainHelper_hello å‡½æ•° Java æ–‡ä»¶ NDKMainHelper123456789package com.hongliang.ndkdemo;public class NDKMainHelper &#123; static &#123; System.loadLibrary(&quot;main&quot;); &#125; public native String getNDKPrint();&#125; static é™æ€å—ä¸­åŠ è½½åŽŸç”Ÿåº“ System.loadLibrary(&quot;main&quot;)ï¼Œä½¿ç”¨çš„æ˜¯åº“å native æ ‡å¿—æ­¤æ–¹æ³•æ˜¯è°ƒç”¨åŽŸç”Ÿåº“çš„å‡½æ•° Activityæ–‡ä»¶123456789101112131415161718package com.hongliang.ndkdemo;import android.support.v7.app.AppCompatActivity;import android.os.Bundle;import android.util.Log;public class MainActivity extends AppCompatActivity &#123; @Override protected void onCreate(Bundle savedInstanceState) &#123; super.onCreate(savedInstanceState); setContentView(R.layout.activity_main); NDKMainHelper ndkMainHelper = new NDKMainHelper(); String msg = ndkMainHelper.getNDKPrint(); Log.e(&quot;MainActivity&quot;, msg); &#125;&#125; åœ¨ MainActivity ä¸­åˆ›å»º NDKMainHelper çš„å¯¹è±¡ï¼Œå¹¶è°ƒç”¨ getNDKPrint æ–¹æ³•ï¼Œæ­¤æ—¶å°±ä¼šè°ƒç”¨ main.cpp çš„å‡½æ•°äº†ã€‚ æœ€ç»ˆæ‰“å°å‡ºæ¥çš„æ˜¯ï¼šNDKDemo æ–‡çŒ®å®˜æ–¹æ–‡æ¡£]]></content>
      <categories>
        <category>Android</category>
      </categories>
      <tags>
        <tag>NDK</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[OkHttpClientçš„Timeoutè§£æž]]></title>
    <url>%2F2019%2F04%2F08%2FOkHttpClient%E7%9A%84Timeout%E8%A7%A3%E6%9E%90%2F</url>
    <content type="text"><![CDATA[ç®€ä»‹okHttp3è¦è®¾ç½®OkHttpClientçš„TimeOutï¼Œéœ€è¦é€šè¿‡OkHttpClient.Builderæ¥è®¾ç½®ã€‚å¦‚ä¸‹ä»£ç ï¼š123456OkHttpClient client = new OkHttpClient.Builder() .connectTimeout(15,TimeUnit.SECONDS) .readTimeout(20, TimeUnit.SECONDS) .writeTimeout(20, TimeUnit.SECONDS) .cache(new Cache(file,10*1024*1024)) .build(); æœ‰æ—¶å€™æˆ‘å¾ˆç–‘æƒ‘ï¼ŒconnectTimeoutã€readTimeoutã€writeTimeoutï¼Œåˆ°åº•æœ‰ä»€ä¹ˆç”¨ï¼Ÿä¸‹é¢æ¥è®²è§£ä¸€ä¸‹ï¼š è§£æžé¦–å…ˆç®€å•è¯´ä¸€ä¸‹socketï¼Œå› ä¸ºokHttpæ˜¯åŸºäºŽsocketå®žçŽ°çš„ã€‚ socketsocketæ˜¯å¯¹ç½‘ç»œä¼ è¾“å±‚TCP/IPåè®®çš„å°è£…ï¼Œä¾¿äºŽç¨‹åºå‘˜è¿›è¡Œä½¿ç”¨ã€‚å®ƒå®šä¹‰äº†ä¸€äº›åŸºæœ¬çš„å‡½æ•°ï¼šcreateã€listenã€connectã€acceptã€sendã€readå’Œwriteç­‰ç­‰ã€‚å…¶ä¸­connectå¯¹åº”äºŽTCPåè®®ä¸­çš„ä¸‰æ¬¡æ¡æ‰‹å»ºç«‹è¿žæŽ¥ï¼Œreadå¯¹åº”äºŽå»ºç«‹è¿žæŽ¥ä¹‹åŽå®¢æˆ·ç«¯è¯»å–æœåŠ¡å™¨æ•°æ®çš„æ“ä½œï¼Œwriteå¯¹åº”äºŽå»ºç«‹è¿žæŽ¥ä¹‹åŽå®¢æˆ·ç«¯å‘æœåŠ¡å™¨å†™å…¥æ•°æ®çš„æ“ä½œã€‚åªéœ€è¦äº†è§£è¿™äº›å°±å¯ä»¥äº†ï¼Œå¦‚æžœè¦æ·±å…¥äº†è§£ï¼Œè¯·æŸ¥çœ‹ã€ŠTCP/IPã€Httpã€SocketåŒºåˆ«ã€‹è¿™ä¸€ç¯‡æ–‡ç« ã€‚ connectTimeoutconnectTimeout æ—¢è¿žæŽ¥è¶…æ—¶ã€‚ç²¾ç¡®æ¥è®²å°±æ˜¯å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨è¦åœ¨è®¾ç½®çš„æ—¶é—´å†…è¿›è¡Œä¸‰æ¬¡æ¡æ‰‹å¹¶å»ºç«‹è¿žæŽ¥ï¼Œå¦‚æžœåœ¨æ­¤æ—¶é—´å†…æ²¡æœ‰å»ºç«‹è¿žæŽ¥ï¼Œé‚£å°±æ˜¯è¿žæŽ¥è¶…æ—¶ã€‚ä½œç”¨ï¼šé™åˆ¶å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨å»ºç«‹è¿žæŽ¥çš„æ—¶é—´ï¼Œå‡å°‘æœåŠ¡å™¨çš„åŽ‹åŠ›ï¼Œé‡Šæ”¾æ›´å¤šèµ„æºä¾›å…¶ä»–è¿žæŽ¥ä½¿ç”¨ã€‚ readTimeoutreadTimeout æ—¢è¯»å–è¶…æ—¶ã€‚ç²¾ç¡®æ¥è®²å°±æ˜¯å®¢æˆ·ç«¯è¦åœ¨è§„å®šçš„æ—¶é—´å†…ä»ŽæœåŠ¡å™¨è¯»å–åˆ°æ•°æ®å†…å®¹ï¼Œæ³¨æ„ä¸æ˜¯è¯»å–æ‰€æœ‰æ•°æ®èŠ±è´¹çš„æ—¶é—´ã€‚ä¾‹å¦‚æœåŠ¡å™¨æœ‰ä¸€ä¸ªå¤§å°ä¸º100å­—èŠ‚çš„æ•°æ®ï¼Œåªè¦å®¢æˆ·ç«¯åœ¨ readTimeoutæ—¶é—´å†…èƒ½å¤Ÿä»ŽæœåŠ¡å™¨è¯»å–åˆ°1å­—èŠ‚çš„æ•°æ®ï¼Œå°±ä¸ä¼šè¶…æ—¶ã€‚ä¸¾ä¸€ä¸ªæ›´ç”ŸåŠ¨çš„ä¾‹å­ï¼šç”¨æ¡¶æŽ¥æ°´ï¼Œæ‰“å¼€æ°´é¾™å¤´(ä¸‰æ¬¡æ¡æ‰‹æˆåŠŸå»ºç«‹äº†è¿žæŽ¥)ï¼Œæœ‰æ°´æµå‡ºæ¥ï¼Œæ— è®ºå¤§å°(èŽ·å–åˆ°çš„æ•°æ®æµå¤§å°)ï¼Œä½†éƒ½æ˜¯æœ‰æ°´çš„ï¼›æ­¤æ—¶åœæ°´äº†(ç›¸å½“äºŽå‡ºçŽ°äº†ç½‘ç»œçŠ¶å†µï¼Œå¯¼è‡´è¯»å–ä¸åˆ°æ•°æ®äº†)ï¼Œä»ŽçŽ°åœ¨å¼€å§‹è®¡ç®—åˆ°readTimeoutæ—¶é—´ï¼Œè¿˜æ²¡æœ‰æ°´å‡ºæ¥çš„è¯(è¯´æ˜Žè¯»å–è¶…æ—¶äº†)ï¼Œå°±å…³é—­æ°´é¾™å¤´(å…³é—­è¿žæŽ¥)ã€‚ writeTimeoutwriteTimeout æ—¢å†™å…¥è¶…æ—¶ã€‚ç²¾ç¡®æ¥è®²å°±æ˜¯å®¢æˆ·ç«¯å‘æœåŠ¡å™¨ä¸Šä¼ æ–‡ä»¶æ—¶ï¼Œè¦åœ¨è§„å®šçš„æ—¶é—´å‘æœåŠ¡å™¨å‘é€æ•°æ®ã€‚æ¯”å¦‚æˆ‘è¦å‘10Mçš„æ•°æ®ï¼Œç»“æžœåªå‘äº†1Må‡ºåŽ»ï¼Œç½‘ç»œå°±ä¸€ç›´ä¸¢åŒ…ï¼Œä»Žè¿™ä¸ªæ—¶é—´èµ·å°±å¼€å§‹ç®—è¶…æ—¶ï¼Œä½†æ˜¯åªè¦æœ‰æ–°çš„æ•°æ®å‘å‡ºåŽ»äº†é‚£ä¹ˆè¶…æ—¶å°±é‡æ–°è®¡ç®—ã€‚è¯´ç™½äº†è¶…æ—¶å°±æ˜¯æ¯æ¬¡æœ€å¤šå¹²ç­‰çš„æ—¶é—´ã€‚]]></content>
      <categories>
        <category>Android</category>
      </categories>
      <tags>
        <tag>okHttp3</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[okhttp3è§£æž]]></title>
    <url>%2F2019%2F04%2F08%2Fokhttp3%E8%A7%A3%E6%9E%90%2F</url>
    <content type="text"></content>
      <categories>
        <category>Android</category>
      </categories>
      <tags>
        <tag>okHttp3</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[okhttp3åŸºæœ¬ä½¿ç”¨]]></title>
    <url>%2F2019%2F04%2F08%2Fokhttp3%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8%2F</url>
    <content type="text"><![CDATA[ç®€ä»‹ä»ŽAndroid4.4å¼€å§‹ï¼Œç³»ç»Ÿå†…ç½®äº†OkHttpã€‚ okHttp3 æœ‰é‡å¤§æ”¹ç‰ˆï¼Œä¾‹å¦‚ FormEncodingBuilder ç±»æ²¡æœ‰äº†ï¼Œå–è€Œä»£ä¹‹çš„æ˜¯ FormBodyã€‚ åŸºæœ¬æ­¥éª¤ åˆ›å»º OkHttpClient åˆ›å»º Request åˆ›å»º Call è°ƒç”¨ Call çš„ enqueue() æˆ–è€… execute() GETè¯·æ±‚123456789101112131415161718192021222324252627282930// 1ã€RequestRequest.Builder builder = new Request.Builder();builder.url(&quot;http://www.hong1969.com&quot;);builder.method(&quot;GET&quot;,null);Request request = builder.build();// 2ã€ HttpClientOkHttpClient client = new OkHttpClient();// 3ã€CallCall call = client.newCall(request);// 4ã€å¼‚æ­¥è¯·æ±‚call.enqueue(new Callback() &#123; @Override public void onFailure(@NonNull Call call, @NonNull IOException e) &#123; e.printStackTrace(); &#125; @Override public void onResponse(@NonNull Call call, @NonNull Response response) throws IOException &#123; ResponseBody responseBody = response.body(); if (null != responseBody) &#123; String string = responseBody.string(); Log.e(LOG_TAG,&quot;è¿”å›žç»“æžœï¼š&quot;+string); &#125; else &#123; Log.e(LOG_TAG,&quot;ResponseBody is null&quot;); &#125; &#125;&#125;); POSTè¯·æ±‚123456789101112131415161718192021222324252627282930313233343536// 1ã€FormBodyFormBody.Builder formBodyBuilder = new FormBody.Builder();formBodyBuilder.add(&quot;username&quot;,&quot;admin&quot;);formBodyBuilder.add(&quot;password&quot;,&quot;123456&quot;);FormBody formBody = formBodyBuilder.build();// 2ã€RequestRequest.Builder builder = new Request.Builder();builder.url(&quot;http://distributionapi.1000fun.com/login/userlogin&quot;);builder.method(&quot;POST&quot;,formBody);Request request = builder.build();// 3ã€ HttpClientOkHttpClient client = new OkHttpClient();// 4ã€CallCall call = client.newCall(request);// 5ã€å¼‚æ­¥è¯·æ±‚call.enqueue(new Callback() &#123; @Override public void onFailure(@NonNull Call call, @NonNull IOException e) &#123; e.printStackTrace(); &#125; @Override public void onResponse(@NonNull Call call, @NonNull Response response) throws IOException &#123; ResponseBody responseBody = response.body(); if (null != responseBody) &#123; String string = responseBody.string(); Log.e(LOG_TAG,&quot;è¿”å›žç»“æžœï¼š&quot;+string); &#125; else &#123; Log.e(LOG_TAG,&quot;ResponseBody is null&quot;); &#125; &#125;&#125;); å¼‚æ­¥ä¸Šä¼ æ–‡ä»¶ ä¸Šä¼ æ–‡ä»¶ä¹Ÿæ˜¯POSTè¯·æ±‚ï¼Œå¹¶ä½¿ç”¨RequestBodyè®¾ç½®è¯·æ±‚ä½“ ä¸Šä¼ æ–‡ä»¶çš„æ ¼å¼é€šè¿‡MediaTypeæ¥è®¾ç½®ã€‚ä¾‹å¦‚MediaType mediaType = MediaType.parse(&quot;text/x-markdown; charset=utf-8&quot;)å°±æ˜¯ç”¨æ¥è®¾ç½®ä¸Šä¼ txtæ–‡ä»¶ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546// 1ã€æ–‡ä»¶è·¯å¾„String filePath = &quot;&quot;;if (Environment.getExternalStorageState().equals(Environment.MEDIA_MOUNTED))&#123; filePath = Environment.getExternalStorageDirectory().getAbsolutePath();&#125; else &#123; return;&#125;// 2ã€æ–‡ä»¶File file = new File(filePath,&quot;wangshu.txt&quot;);// 3ã€RequestBodyï¼Œä¸Šä¼ çš„æ˜¯txtæ ¼å¼çš„æ–‡ä»¶MediaType mediaType = MediaType.parse(&quot;text/x-markdown; charset=utf-8&quot;);RequestBody requestBody = RequestBody.create(mediaType, file);// 4ã€RequestRequest.Builder requestBuilder = new Request.Builder();requestBuilder.url(&quot;https://api.github.com/markdown/raw&quot;) .post(requestBody) .build();Request request = requestBuilder.build();// 5ã€HttpClientOkHttpClient client = new OkHttpClient();// 6ã€CallCall call = client.newCall(request);call.enqueue(new Callback() &#123; @Override public void onFailure(@NonNull Call call, @NonNull IOException e) &#123; e.printStackTrace(); if (e instanceof FileNotFoundException)&#123; Log.e(LOG_TAG,&quot;è¯¥æ–‡ä»¶ä¸å­˜åœ¨&quot;); &#125; &#125; @Override public void onResponse(@NonNull Call call, @NonNull Response response) throws IOException &#123; ResponseBody responseBody = response.body(); if (null != responseBody) &#123; String string = responseBody.string(); Log.e(LOG_TAG,&quot;è¿”å›žç»“æžœï¼š&quot;+string); &#125; else &#123; Log.e(LOG_TAG,&quot;ResponseBody is null&quot;); &#125; &#125;&#125;); å¼‚æ­¥ä¸‹è½½æ–‡ä»¶ å¯ä»¥ä¸ç”¨è®¾ç½®è¯·æ±‚æ–¹å¼ é€šè¿‡IOæµå¯¹Responseè¿›è¡Œå¤„ç† 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748// 1ã€RequestString url = &quot;https://www.baidu.com/img/bd_logo1.png&quot;;Request request = new Request.Builder().url(url).build();// 2ã€OkHttpClient è®¾ç½®OkHttpClient client = new OkHttpClient();// 3ã€CallCall call = client.newCall(request);call.enqueue(new Callback() &#123; @Override public void onFailure(@NonNull Call call, @NonNull IOException e) &#123; e.printStackTrace(); if (e instanceof FileNotFoundException)&#123; Log.e(LOG_TAG,&quot;è¯¥æ–‡ä»¶ä¸å­˜åœ¨&quot;); &#125; &#125; @Override public void onResponse(@NonNull Call call, @NonNull Response response) &#123; ResponseBody responseBody = response.body(); if (null != responseBody) &#123; InputStream inputStream = responseBody.byteStream(); String filePath; try &#123; if (Environment.getExternalStorageState().equals(Environment.MEDIA_MOUNTED))&#123; filePath = Environment.getExternalStorageDirectory().getAbsolutePath(); &#125; else &#123; filePath = context.getFilesDir().getAbsolutePath(); &#125; File file = new File(filePath,&quot;wangshu.jpg&quot;); FileOutputStream fileOutputStream = new FileOutputStream(file); byte[] buffer = new byte[1024]; int len = 0; while ( (len = inputStream.read(buffer)) != -1)&#123; fileOutputStream.write(buffer,0,len); &#125; fileOutputStream.flush(); &#125; catch (IOException e)&#123; e.printStackTrace(); &#125; &#125; else &#123; Log.e(LOG_TAG,&quot;ResponseBody is null&quot;); &#125; &#125;&#125;); å¼‚æ­¥ä¸Šä¼ Multipartæ–‡ä»¶ä½¿ç”¨åœºæ™¯åœ¨ä¸Šä¼ æ–‡ä»¶çš„æ—¶å€™ï¼Œéœ€è¦åŒæ—¶ä¸Šä¼ å‚æ•° åŸºæœ¬æ­¥éª¤ ä½¿ç”¨MultipartBody.Builderåˆ›å»ºRequestBody åˆ›å»ºRequestï¼Œå¹¶åŒ…å«RequestBody å…¶ä»–æ­¥éª¤ä¸å˜ 123456789101112131415161718192021222324252627282930313233// 1ã€è®¾ç½®MediaTypefinal MediaType MEDIA_TYPE_PNG = MediaType.parse(&quot;image/png&quot;);// 2ã€è®¾ç½® RequestBodyRequestBody requestBody = new MultipartBody.Builder() .setType(MultipartBody.FORM) .addFormDataPart(&quot;title&quot;,&quot;wangshu&quot;) // ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯keyå€¼ï¼Œç¬¬äºŒä¸ªå‚æ•°ä¸Šä¼ æ–‡ä»¶çš„åå­—ï¼Œç¬¬ä¸‰ä¸ªå‚æ•°æ˜¯ä¸Šä¼ çš„æ–‡ä»¶ .addFormDataPart(&quot;image&quot;,&quot;wangshu.png&quot;, RequestBody.create(MEDIA_TYPE_PNG, new File(&quot;/storage/emulated/0/wangshu.png&quot;))) .build();// 3ã€è®¾ç½® RequestRequest request = new Request.Builder() .url(&quot;https://.....&quot;) .post(requestBody) .build();// 4ã€è®¾ç½® OkHttpClientOkHttpClient okHttpClient = new OkHttpClient();// 5ã€ CallCall call = okHttpClient.newCall(request);call.enqueue(new Callback() &#123; @Override public void onFailure(@NonNull Call call, @NonNull IOException e) &#123; &#125; @Override public void onResponse(@NonNull Call call, @NonNull Response response) throws IOException &#123; &#125;&#125;);]]></content>
      <categories>
        <category>Android</category>
      </categories>
      <tags>
        <tag>okHttp3</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[okhttp3é…ç½®]]></title>
    <url>%2F2019%2F04%2F08%2Fokhttp3%E9%85%8D%E7%BD%AE%2F</url>
    <content type="text"><![CDATA[ä¾èµ–å¯¼å…¥åœ¨ module çš„ build.gradle æ–‡ä»¶ä¸­æ·»åŠ ä¸‹é¢çš„ä»£ç ï¼Œå¹¶é‡æ–°build12implementation &apos;com.squareup.okhttp3:okhttp:3.14.0&apos;implementation &apos;com.squareup.okio:okio:2.2.2&apos; Build æ—¶å‡ºçŽ°çš„é—®é¢˜å¦‚æžœ build å¤±è´¥ï¼Œå¹¶å‡ºçŽ°äº†ä¸‹é¢çš„é—®é¢˜ï¼š1234Caused by: com.android.builder.dexing.DexArchiveBuilderException: Failed to process /Users/hongliang/.gradle/caches/modules-2/files-2.1/com.squareup.okhttp3/okhttp/3.14.0/c3a9efd10f26a802da2c47dbe54a8d4c44a6019f/okhttp-3.14.0.jarCaused by: com.android.builder.dexing.DexArchiveBuilderException: Error while dexing.Caused by: com.android.tools.r8.CompilationFailedException: Compilation failed to completeCaused by: com.android.tools.r8.utils.AbortException: Error: Static interface methods are only supported starting with Android N (--min-api 24): okhttp3.Request okhttp3.Authenticator.lambda$static$0(okhttp3.Route, okhttp3.Response) åŽŸå› Java8ä¹‹åŽæ‰æ”¯æŒlambdaå’Œé™æ€æŽ¥å£æ–¹æ³•ï¼Œæ‰€ä»¥éœ€è¦æŒ‡å®šä½¿ç”¨Java8ç¼–è¯‘ è§£å†³åŠžæ³•åœ¨ module çš„ build.gradle æ–‡ä»¶ä¸­æ·»åŠ ä¸‹é¢çš„ä»£ç ï¼Œå¹¶é‡æ–°build1234567android &#123; ... compileOptions &#123; sourceCompatibility JavaVersion.VERSION_1_8 targetCompatibility JavaVersion.VERSION_1_8 &#125;&#125; okHttp3ç³»åˆ—æ–‡ç« okHttp3-åŸºæœ¬ä½¿ç”¨]]></content>
      <categories>
        <category>Android</category>
      </categories>
      <tags>
        <tag>okHttp3</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Hello World]]></title>
    <url>%2F2019%2F04%2F02%2Fhello-world%2F</url>
    <content type="text"><![CDATA[Welcome to Hexo! This is your very first post. Check documentation for more info. If you get any problems when using Hexo, you can find the answer in troubleshooting or you can ask me on GitHub. Quick StartCreate a new post1$ hexo new "My New Post" More info: Writing Run server1$ hexo server More info: Server Generate static files1$ hexo generate More info: Generating Deploy to remote sites1$ hexo deploy More info: Deployment]]></content>
  </entry>
  <entry>
    <title><![CDATA[æ ‘èŽ“æ´¾åˆ¶ä½œå¤å¤æ¸¸æˆæœº]]></title>
    <url>%2F2019%2F04%2F02%2F%E6%A0%91%E8%8E%93%E6%B4%BE%E5%88%B6%E4%BD%9C%E5%A4%8D%E5%8F%A4%E6%B8%B8%E6%88%8F%E6%9C%BA%2F</url>
    <content type="text"><![CDATA[å„ä½90åŽçš„å°ä¼™å­ä»¬ï¼Œæ˜¯å¦è¿˜è®°å¾—â€œé­‚æ–—ç½—â€ã€â€œè¶…çº§çŽ›ä¸½äºšâ€ã€â€œåŒæˆªé¾™â€ç­‰ä¸€ç³»åˆ—çš„æ¸¸æˆå‘ã€‚è¿™ç¯‡æ–‡ç« æ•™ä½ åˆ¶ä½œä¸€ä¸ªå¤å¤æ¸¸æˆæœºï¼Œå¯ä»¥è¿è¡Œ nesã€neogeoç­‰20å‡ ç§æ¸¸æˆæ¨¡æ‹Ÿå™¨ï¼Œè®©ä½ æ»¡è¶³å„¿æ—¶çš„æ¸¸æˆæ¢¦æƒ³ã€‚ å‰æœŸå‡†å¤‡åˆ¶ä½œå¤å¤æ¸¸æˆæœºçš„æ ¸å¿ƒæ˜¯ï¼šæ ‘èŽ“æ´¾ã€MicroSDå¡ã€ç³»ç»Ÿé•œåƒã€æ¸¸æˆæ‰‹æŸ„ï¼›ä¸‹é¢ä¼šä¾æ¬¡åšä»‹ç»ã€‚ æ ‘èŽ“æ´¾æ ‘èŽ“æ´¾æ˜¯ä¸€å—å¼€å‘æ¿ï¼Œå¯ä»¥ç†è§£ä¸ºå¾®åž‹è®¡ç®—æœºã€‚ç¬”è€…ä½¿ç”¨çš„æ ‘èŽ“æ´¾3b+åž‹å·ï¼Œå®ƒæŽ¥å£ä¸°å¯Œâ€”â€”4ä¸ªUSBæŽ¥å£ã€ä¸€ä¸ªHDMIã€ä¸€ä¸ªåƒå…†ç½‘å£ï¼Œè¿˜é…æœ‰è“ç‰™ã€WIFIç­‰ã€‚å…³äºŽæ ‘èŽ“æ´¾çš„è¯¦ç»†ä»‹ç»ï¼Œè¯·ç‚¹å‡»æ ‘èŽ“æ´¾å®˜ç½‘æŸ¥çœ‹ã€‚ MicroSDå¡å› ä¸ºæ ‘èŽ“æ´¾æ˜¯æ²¡æœ‰å­˜å‚¨å†…å­˜çš„ï¼Œæ‰€ä»¥éœ€è¦ä½¿ç”¨ MicroSDå¡ä½œä¸ºå­˜å‚¨å†…å­˜ï¼Œç”¨æ¥çƒ§å½•é•œåƒå’Œæ”¾ç½®æ¸¸æˆROMï¼Œå¹¶ä¸”å†…å­˜è‡³å°‘16GBèµ·æ­¥ï¼Œè¿™æ ·æ‰èƒ½æ„‰å¿«åœ°æ”¾éžå¸¸éžå¸¸å¤šçš„æ¸¸æˆã€‚ç¬”è€…ä½¿ç”¨çš„æ˜¯é—ªè¿ªClass10ã€‚ é•œåƒå¯ä»¥çƒ§å½•åœ¨æ ‘èŽ“æ´¾ä¸Šçš„æ¸¸æˆé•œåƒæœ‰å¾ˆå¤šï¼Œç¬”è€…æŽ¨èçš„æ˜¯recalboxã€‚ Recalbox å®˜æ–¹ç½‘ç«™ï¼šhttps://www.recalbox.com é•œåƒä¸‹è½½åœ°å€ï¼šhttps://archive.recalbox.comï¼Œé€‰æ‹© â€œRaspberry Pi 3 / 3 B+â€ å°±å¯ä»¥äº† é•œåƒä¸‹è½½æœ‰ç‚¹æ…¢ï¼Œå› æ­¤ç¬”è€…åœ¨ç™¾åº¦äº‘ç›˜åˆ†äº«äº†å‡ºæ¥ï¼Œå–è´§ç ã€e6mhã€‘ï¼Œå¿«é€Ÿåˆ°è¾¾ åˆ¶ä½œå·¥å…·Macç”µè„‘ä¸‹çš„é•œåƒåˆ¶ä½œåœ¨Macç”µè„‘ä¸‹ï¼Œä½¿ç”¨ balenaEtcher åšé•œåƒçƒ§å½•æ“ä½œã€‚ä¸‹è½½åœ°å€ï¼šhttps://www.balena.io/etcher/ é€‰æ‹© â€œEtcher for macOSâ€ å°±å¯ä»¥äº† ç¬¬ä¸€æ­¥ä½¿ç”¨ Mac çš„ç£ç›˜å·¥å…·å¯¹ MicroSDå¡ è¿›è¡Œæ ¼å¼åŒ–ï¼Œé€‰æ‹©â€œMS-DOS (FAT32)â€æ ¼å¼ã€‚ æ ¼å¼åŒ–æˆåŠŸä¹‹åŽï¼Œæ‰“å¼€ balenaEtcher è½¯ä»¶ï¼Œç‚¹å‡»â€œselect imageâ€æŒ‰é’®é€‰æ‹©æˆ‘ä»¬ä¸‹è½½çš„ recalbox é•œåƒï¼Œå†é€‰æ‹©æˆ‘ä»¬çš„ MicroSDå¡ï¼Œæœ€åŽç‚¹å‡»â€œFlashâ€å°±å¯ä»¥äº†ï¼Œæ­¤æ—¶é•œåƒå¼€å§‹çƒ§å½•ã€‚ é•œåƒçƒ§å½•å®Œæˆï¼Œå°† MicroSDå¡æ’å…¥æ ‘èŽ“æ´¾å°±å¯ä»¥è¿è¡Œäº†ã€‚ Windowsç”µè„‘ä¸‹çš„é•œåƒåˆ¶ä½œå†ä¸‹è½½ balenaEtcher æ—¶ï¼Œé€‰æ‹©â€œ Etcher for Windows x64 (64-bit) (Installer) â€ å°±å¯ä»¥äº†ã€‚é™¤äº†æ ¼å¼åŒ–çš„å·¥å…·ä¸ä¸€æ ·ä»¥å¤–ï¼Œå…¶ä»–æ­¥éª¤éƒ½ä¸€æ ·ã€‚ æ¸¸æˆROMçš„æ”¾å…¥ä¸€ä¸ªè¦æ±‚ï¼šéœ€è¦æ ‘èŽ“æ´¾å’Œç”µè„‘åœ¨åŒä¸€ç½‘æ®µçš„å±€åŸŸç½‘ä¸­ã€‚ åœ¨æ²¡æœ‰ä¿®æ”¹æ¸¸æˆç³»ç»Ÿçš„åå­—çš„å‰æä¸‹ï¼Œç”µè„‘ä¸­ä¼šæœ‰ä¸€ä¸ª RECALBOX çš„å…±äº«æ–‡ä»¶ã€‚ æ ¹æ®æ­¥éª¤è¿›å…¥å„ä¸ªæ¨¡æ‹Ÿå™¨romæ–‡ä»¶å¤¹ï¼šshare -&gt; romsï¼›romsæ–‡ä»¶å¤¹ä¸­åŒ…å«äº†æ‰€æœ‰æ¨¡æ‹Ÿå™¨çš„romæ–‡ä»¶å¤¹ï¼Œå°†æ¸¸æˆæ”¾å…¥å¯¹åº”çš„romæ–‡ä»¶å¤¹ä¸­å°±å¯ä»¥äº†ã€‚ é‡å¯ç³»ç»Ÿï¼Œå°±å¯ä»¥çœ‹åˆ°ä½ å–œçˆ±çš„æ¸¸æˆäº†ã€‚ è£…å¤‡çŽ©æ¸¸æˆæ€Žä¹ˆèƒ½æ²¡æœ‰æ‰‹æŸ„å‘ï¼ŒæŽ¨èä¸¤ä¸ªæ‰‹æŸ„ï¼š PS3æ¸¸æˆæ‰‹æŸ„ï¼Œè“ç‰™åŒ¹é…ï¼Œå®Œç¾Žè¿è¡Œï¼Œç´¢å°¼å¤§æ³•å°±æ˜¯å¥½ï¼ åŒ—é€šUSBæ¸¸æˆæ‰‹æŸ„ï¼ æ˜¾ç¤ºå™¨ï¼šenï½ž ç”¨è¿‡28å¯¸4Kçš„ï¼Œå®Œç¾Žè¿è¡Œã€‚ä¸çŸ¥é“æ”¾åˆ°ç”µè§†ä¸Šä¼šæœ‰å¤šå¤§çš„é©¬èµ›å…‹ï¼ŒðŸ˜‚]]></content>
      <categories>
        <category>æ ‘èŽ“æ´¾</category>
      </categories>
      <tags>
        <tag>æ ‘èŽ“æ´¾</tag>
        <tag>ç¡¬ä»¶</tag>
      </tags>
  </entry>
</search>
